# Технологии виртуализации

## Запуск

| # | Команда для запуска | Описание |
|---|---|---|
| 1 | `docker build -t server-app .` | Команда используется для создания Docker-образа из Dockerfile, который находится в текущей директории (.) |
|  | `docker build` |  Это команда Docker для создания Docker-образов |
|  | `-t server-app` | Опция -t используется для задания тега (или имени) образа. В данном случае мы задаем имя образа как `server-app` |
|  | `.` | Это путь к контексту сборки. В текущем контексте сборки должен находиться Dockerfile, который будет использован для создания образа |
| 2 | `docker run -p 8000:8000 server-app` | Команда используется для запуска контейнера из Docker-образа `server-app` |
|  | `docker run` | Это команда Docker для запуска контейнера |
|  | `-p 8000:8000` |  Опция `-p` используется для проброса портов между хостом и контейнером. В данном случае мы пробрасываем порт 8000 хоста на порт 8000 контейнера |
|  | `server-app` | Это имя Docker-образа, из которого будет запущен контейнер |

Таким образом, после выполнения команды #2, будет запущен контейнер из Docker-образа server-app, и порт 8000 на хосте будет привязан к порту 8000 внутри контейнера, что позволит вам обращаться к приложению, которое работает в контейнере, через порт 8000 на вашем хосте

## Хост

В контексте веб-серверов, таких как Flask, `хост` обозначает сетевой интерфейс, на котором сервер прослушивает входящие соединения и обрабатывает запросы. Указание хоста определяет, на каких сетевых интерфейсах сервер будет слушать входящие запросы.

Когда вы запускаете веб-приложение, вы можете указать хост, на котором оно будет доступно. Например:

+ `'127.0.0.1'` или `'localhost'` указывает на то, что сервер будет доступен только локально на том же компьютере, где он запущен.
+ `'0.0.0.0'` указывает на то, что сервер будет доступен на всех сетевых интерфейсах, доступных на устройстве. Это означает, что он будет слушать входящие запросы извне, включая запросы из локальной сети или из интернета.

В контексте Docker, указание хоста `'0.0.0.0'` важно, чтобы серверное приложение в контейнере было доступно извне контейнера.

<details>
<summary>Что, если...</summary>

Если запустить серверное приложение на базе Flask в Docker контейнере и не указать `host='0.0.0.0'`, Flask по умолчанию будет прослушивать только локальный IP-адрес контейнера. Это означает, что Flask приложение будет доступно только внутри контейнера и не будет доступно извне.

Для того чтобы Flask приложение было доступно извне контейнера, например, для обработки входящих запросов из интернета или из других контейнеров в той же сети, нужно явно указать host='0.0.0.0', чтобы Flask прослушивал все сетевые интерфейсы в контейнере.

</details>
